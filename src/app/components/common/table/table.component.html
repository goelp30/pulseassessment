  <!-- Search Bar Section -->
  <div class="flex justify-center w-full mb-6">
    <app-searchbar
      [searchQuery]="searchQuery"
      [class]="'block w-[50vw] px-4 py-2 mb-2 border border-gray-300 rounded-full text-lg shadow-md outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 transition-all duration-100 transform'"
      placeholder="Search Assessments"
      (searchQueryChange)="onSearchQueryChange($event)">
    </app-searchbar>
  </div>

  <!-- Dynamic Tabs Section -->
  @if(tabs.length > 0){
  <div class="flex justify-center pt-5">
    <div class="flex flex-col items-center justify-between gap-4 md:flex-row">
      <div class="block w-full overflow-hidden md:w-max">
        <nav>
          <ul role="tablist" class="relative flex flex-row p-1 rounded-lg bg-blue-gray-50 bg-opacity-60">
            @for(tab of tabs; track tab){
            <li
                class="relative inline-flex items-center justify-center px-4 py-1 font-sans text-base antialiased font-normal leading-relaxed text-center bg-transparent cursor-pointer select-none text-blue-gray-900"
                [class.bg-white]="activeTab === tab"
                (click)="selectTab(tab)">
              <div class="z-20 text-inherit">
                &nbsp;&nbsp;{{ tabAliases[tab] || tab }}&nbsp;&nbsp;
              </div>
              @if(activeTab === tab){
              <div class="absolute inset-0 z-10 h-full bg-white rounded-md shadow"></div>}
            </li>}
          </ul>
        </nav>
      </div>
    </div>
  </div>}

  <!-- Table Section -->
  <div class="flex flex-col min-h-[100vh] w-full text-gray-700 bg-white shadow-md rounded-xl bg-clip-border">
    <div class="relative overflow-hidden text-gray-700 bg-white rounded-none bg-clip-border">
      <div class="flex items-center justify-between gap-8 mb-2">
        <div class="flex flex-col gap-2 shrink-0 sm:flex-row"></div>
      </div>
      <div class="flex flex-col items-center justify-between gap-4 md:flex-row">
        <div class="block w-full overflow-hidden md:w-max"></div>
      </div>
    </div>

    <!-- Content & Pagination Wrapper -->
    <div class="flex-grow flex flex-col">
      <div class="flex-grow">
        <table class="w-full table-auto table-fixed text-center min-w-max border-collapse border border-gray-300"> <!-- Removed mx-4 -->
          <thead>
            <tr>
              @for(column of tableColumns; track column){
              <th 
                class="p-3 border-y border-blue-gray-100 bg-blue-gray-50/50 text-sm font-medium text-gray-700 uppercase tracking-wider text-center pr">
                <div class="flex items-center" style="padding-left:30%; justify-content: start;">
                  <!-- Centered column headers -->
                @for(alias of getColumnAliases(column); track alias){
                <ng-container>
                  <div>{{ alias }}</div>
                </ng-container>}
                </div>
              </th>}
              <th class="p-3 border-y border-blue-gray-100 bg-blue-gray-50/50 text-sm font-medium text-gray-700 uppercase tracking-wider text-center"> <!-- Action column centered -->
                <div class="flex justify-center pr-[8%]"> <!-- Center action text -->
                  Action
                </div>
              </th>
            </tr>
          </thead>
          @if(filteredData.length > 0){
            <tbody>
              @for(row of getPaginatedData(); track row){
              <tr class="hover:bg-gray-50">
                @for(column of tableColumns; track column){
                  <td class="p-4 border-b border-blue-gray-50">
                    <div class="flex justify-start" style="padding-left: 30%;">
                      <p class="block font-sans text-sm antialiased font-normal leading-normal text-blue-gray-900">{{ row[column] | titlecase}}</p>
                    </div>
                  </td>
                }
                <td class="p-4 border-b border-blue-gray-50 text-center">
                  <div class="flex justify-center gap-4 pr-8">
                    @for(button of buttons; track button){
                      <app-button
                        [label]="button.label"
                        [colorClass]="button.colorClass"
                        (action)="button.action(row)">
                      </app-button>
                    }
                  </div>
                </td>
              </tr>}
            </tbody>}
        </table>

        <!-- No Data Found Section -->
        @if(filteredData.length === 0){
        <div class="flex justify-center mt-4 text-gray-500">
          <p class="text-sm">No data found</p>
        </div>}
      </div>

      <!-- Pagination Section -->
      @if(filteredData.length > 0){
      <div class="flex justify-center items-center gap-4 p-4 border-t border-blue-gray-50 mt-auto">
        <button (click)="previousPage()"
                class="select-none rounded-lg border py-2 px-4 text-gray-700 hover:bg-gray-200 disabled:bg-gray-400 disabled:cursor-not-allowed"
                [disabled]="currentPage <= 1">
          Previous
        </button>
        <div class="flex gap-2">
          @for(page of pageNumbers; track page){
          <button  
                  (click)="goToPage(page)"
                  class="select-none rounded-lg border py-2 px-4 text-gray-700 hover:bg-blue-500 hover:text-white"
                  [class.bg-blue-500]="currentPage === page"
                  [class.text-white]="currentPage === page">
            {{ page }}
          </button>}
        </div>
        <button (click)="nextPage()"
                class="select-none rounded-lg border py-2 px-4 text-gray-700 hover:bg-gray-200 disabled:bg-gray-400 disabled:cursor-not-allowed"
                [disabled]="currentPage >= totalPages">
          Next
        </button>
      </div>}

      <!-- Page Info Section -->
      @if(filteredData.length > 0){
      <div class="flex justify-center mb-4">
        <p class="text-sm text-gray-600">Page {{ currentPage }} of {{ totalPages }}</p>
      </div>}
    </div>
  </div>

<!-- Search Bar Section -->
<div class="flex justify-center w-full">
  <app-searchbar 
    [searchQuery]="searchQuery"
    [class]="'mb-1 w-[50vw] border-2 p-2 rounded-3xl border-gray-300 shadow-md focus:outline-none focus:ring'"
    placeholder="Search Assessments" 
    (searchQueryChange)="onSearchQueryChange($event)">
  </app-searchbar>
</div>

<!-- Dynamic Tabs Section -->
<div *ngIf="tabs.length > 0" class="flex justify-center pt-5">
  <div class="flex flex-col items-center justify-between gap-4 md:flex-row">
    <div class="block w-full overflow-hidden md:w-max">
      <nav>
        <ul role="tablist" class="relative flex flex-row p-1 rounded-lg bg-blue-gray-50 bg-opacity-60">
          <!-- Loop through the tabs passed as input -->
          <li *ngFor="let tab of tabs"
              class="relative inline-flex items-center justify-center px-4 py-1 font-sans text-base antialiased font-normal leading-relaxed text-center bg-transparent cursor-pointer select-none text-blue-gray-900"
              [class.bg-white]="activeTab === tab"
              (click)="selectTab(tab)">
            <div class="z-20 text-inherit">
              &nbsp;&nbsp;{{ tabAliases[tab] || tab }}&nbsp;&nbsp;
            </div>
            <div *ngIf="activeTab === tab" class="absolute inset-0 z-10 h-full bg-white rounded-md shadow"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

<!-- Table Section -->
<div class="relative flex flex-col w-full text-gray-700 bg-white shadow-md rounded-xl bg-clip-border overflow-y-auto">
  <div class="relative mx-4 overflow-hidden text-gray-700 bg-white rounded-none bg-clip-border">
    <div class="flex items-center justify-between gap-8 mb-2">
      <div class="flex flex-col gap-2 shrink-0 sm:flex-row"></div>
    </div>
    <div class="flex flex-col items-center justify-between gap-4 md:flex-row">
      <div class="block w-full overflow-hidden md:w-max"></div>
    </div>
  </div>

  <div class="p-6 px-0">
    <table class="w-full text-left table-auto min-w-max">
      <thead>
        <tr>
          <th *ngFor="let column of tableColumns" class="p-4 border-y border-blue-gray-100 bg-blue-gray-50/50">
            <ng-container *ngFor="let alias of getColumnAliases(column)">
              <div>{{ alias }}</div>
            </ng-container>
          </th>
          <th class="p-4 border-y border-blue-gray-100 bg-blue-gray-50/50 text-center">Action</th>
        </tr>
      </thead>
      <tbody class="overflow-y-auto max-h-96">
        <tr *ngFor="let row of getPaginatedData()">
          <td *ngFor="let column of tableColumns" class="p-4 border-b border-blue-gray-50">
            <p class="block font-sans text-sm antialiased font-normal leading-normal text-blue-gray-900">{{ row[column] }}</p>
          </td>
          <td class="p-4 border-b border-blue-gray-50">
            <div class="flex justify-center gap-4">
              <app-button *ngFor="let button of buttons" 
                          [label]="button.label" 
                          [colorClass]="button.colorClass" 
                          (action)="button.action(row)">
              </app-button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination Section -->
    <div class="flex items-center justify-between p-4 border-t border-blue-gray-50">
      <button (click)="previousPage()" class="select-none rounded-lg border border-gray-900 py-2 px-4" [disabled]="currentPage <= 1">Previous</button>
      <div class="flex gap-2">
        <button *ngFor="let page of pageNumbers" (click)="goToPage(page)" class="select-none rounded-lg border py-2 px-4">{{ page }}</button>
      </div>
      <button (click)="nextPage()" class="select-none rounded-lg border border-gray-900 py-2 px-4" [disabled]="currentPage >= totalPages">Next</button>
    </div>
  </div>
</div>


<div class="min-h-screen bg-gray-100 p-6">
  <div class=" bg-white shadow-lg rounded-lg p-6">
    <h1 class="text-3xl font-semibold mb-6 text-gray-800 border-b pb-3">
      Assessment Records
    </h1>

    <div class="mb-6">
      <input
        type="text"
        placeholder="Search by Assessment Name or User Name"
        [(ngModel)]="searchQuery"
        (input)="onSearch()"
        class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300 text-gray-700"
      />
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full bg-white border-collapse border border-gray-300 rounded-lg shadow-sm">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">
              Assessment Name
            </th>
            <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">
              Candidate Name
            </th>
            <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">
              Candidate Email
            </th>
            <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">
              Status
            </th>
            <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">
              URL
            </th>
            <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">
              Action
            </th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let assessment of filteredAssessments"
            class="hover:bg-gray-50"
          >
            <td class="px-6 py-3 border-b text-gray-700">
              {{ assessment.assessmentName }}
            </td>
            <td class="px-6 py-3 border-b text-gray-700">
              {{ assessment.userName }}
            </td>
            <td class="px-6 py-3 border-b text-gray-700">
              {{ assessment.email }}
            </td>
            <td class="px-6 py-3 border-b">
              <span
                [ngClass]="{
                  'text-green-600': assessment.status === 'Active',
                  'text-red-600': assessment.status === 'Expired',
                  'text-yellow-600': assessment.status === 'In Progress',
                  'text-blue-600': assessment.status === 'Completed',
                  'text-gray-600': assessment.status === 'Invalidated'
                }"
                class="font-semibold"
              >
                {{ assessment.status || 'Unknown' }}
              </span>
            </td>
            <td class="px-6 py-3 border-b text-blue-600">
              <a
                [href]="assessment.url"
                target="_blank"
                class="underline hover:text-blue-800"
              >
                {{ assessment.url }}
              </a>
            </td>
            <td class="px-6 py-3 border-b text-gray-700">
              <button
                (click)="invalidateAssessment(assessment)"
                class="px-4 py-2 bg-red-500 text-white font-medium rounded-lg"
                [disabled]="isInvalidateDisabled(assessment)"
                [ngClass]="{ 'opacity-50': isInvalidateDisabled(assessment) }"
              >
                Invalidate
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
